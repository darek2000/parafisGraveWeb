@model CemeteryWeb.Models.SearchModel

@{
	Layout = "~/Views/Shared/_Administration.cshtml";
}

<script>
	function searchGrave(e) {
		var valName = $("#Name").val();
		var valSurname = $("#Surname").val();
		var valSector = $("#Sector").val();
		var valRow = $("#Row").val();
		var valNumber = $("#Number").val();
		var valVerification = $('input[id="IsForVerification"]')[0].checked;
		var valReserved = $('input[id="IsReserved"]')[0].checked;

		if (valName != "" || valSurname != "" || valSector != "" || valRow != "" || valNumber != "")
			$.ajax({
				type: "POST",
				url: '/Grave/EditSearchGrave',
				data: { namePerson: valName, surnamePerson: valSurname, sector: valSector, row: valRow, number: valNumber, verification: valVerification, reserved: valReserved },
				success: function (data, textStatus, jqXHR) {
					$('#graveInfo').html(data);
				},
				error: function (a, b, c) {
					alert("Wystąpił bład podczas pobierania danych. Proszę skonatkować się ze wsparciem aplikacji")
				}
			});
	}

	function filterGrave(e) {
		var valFilter = $('input[name="radio_filtergravesearch"]:checked').attr("id");

		console.log("filterGrave: " + valFilter);

		$.ajax({
			type: "POST",
			url: '/Grave/FilterGrave',
			data: { nameFilter: valFilter },
			success: function (data, textStatus, jqXHR) {
				$('#graveInfo').html(data);
			},
			error: function (a, b, c) {
				alert("Wystąpił bład podczas pobierania danych. Proszę skonatkować się ze wsparciem aplikacji")
			}
		});
	}
</script>

<h1>Edytowanie danych</h1>
<h2 class="errormsg">@ViewBag.ErrorMessage</h2>

<div class="row">
	<div class="col-md-4">
		<div class="row">
			<div class="col-md-12">
				<h3>Wyszukiwarka zmarłych</h3><br />
			</div>
		</div>
		<div class="row">
			<div class="col-md-6">
				<div class="form-group">
					@Html.LabelFor(m => m.Name, htmlAttributes: new { @class = "control-label", @style = "color:gray" })<br />
					@Html.TextBoxFor(m => m.Name, htmlAttributes: new { placeholder = "Wprowadź imię", @style = "padding: 7px; width: 200px; border:1px solid lightgray;border-radius:3px;border-color:lightgray" })
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					@Html.LabelFor(m => m.Surname, htmlAttributes: new { @class = "control-label", @style = "color:gray" })<br />
					@Html.TextBoxFor(m => m.Surname, htmlAttributes: new { placeholder = "Wprowadź nazwisko", @style = "padding: 7px; width: 200px; border:1px solid lightgray;border-radius:3px;border-color:lightgray" })
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-2">
				<div class="form-group">
					@Html.LabelFor(m => m.Sector, htmlAttributes: new { @class = "control-label", @style = "color:gray" })<br />
					@Html.TextBoxFor(m => m.Sector, htmlAttributes: new { placeholder = "Wprowadź", @style = "padding: 7px; width: 80px; border:1px solid lightgray;border-radius:3px;border-color:lightgray" })
				</div>
			</div>
			<div class="col-md-2">
				<div class="form-group">
					@Html.LabelFor(m => m.Row, htmlAttributes: new { @class = "control-label", @style = "color:gray" })<br />
					@Html.TextBoxFor(m => m.Row, htmlAttributes: new { placeholder = "Wprowadź", @style = "padding: 7px; width: 80px; border:1px solid lightgray;border-radius:3px;border-color:lightgray" })
				</div>
			</div>
			<div class="col-md-2">
				<div class="form-group">
					@Html.LabelFor(m => m.Number, htmlAttributes: new { @class = "control-label", @style = "color:gray" })<br />
					@Html.TextBoxFor(m => m.Number, htmlAttributes: new { placeholder = "Wprowadź", @style = "padding: 7px; width: 80px; border:1px solid lightgray;border-radius:3px;border-color:lightgray" })
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-6">
				<div class="form-group">
					@Html.LabelFor(m => m.IsForVerification, htmlAttributes: new { @class = "control-label", @style = "color:gray" })<br />
					@Html.CheckBoxFor(m => m.IsForVerification, htmlAttributes: new { @style = "padding: 7px; border:1px solid lightgray;" })<br />
					<span>Uwaga! Zaleca się stosować wyszukiwanie Weryfikacji razem z dodatkowym/ymi atrybutami, w przyciwnym przypadku wynik będzie miał dużą ilość rekordów</span>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					@Html.LabelFor(m => m.IsReserved, htmlAttributes: new { @class = "control-label", @style = "color:gray" })<br />
					@Html.CheckBoxFor(m => m.IsReserved, htmlAttributes: new { @style = "padding: 7px; border:1px solid lightgray;" })<br />
					<span>Uwaga! Zaleca się stosować wyszukiwanie Rezerwacji razem z dodatkowym/ymi atrybutami, w przyciwnym przypadku wynik będzie miał dużą ilość rekordów</span>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-9">
			</div>
			<div class="col-md-3">
				<button class="w-100 btn btn-md btn-primary" type="button" onclick="searchGrave()">Wyszukaj</button>
			</div>
		</div>
		<br /><br />
	</div>
	<div class="col-md-3">
		<div class="row">
			<div class="col-md-12">
				<h3>Wyszukiwarka grobów</h3><br />
			</div>
		</div>
		<div class="row" style="margin-left:20px">
			<input type="radio" id="nocords" name="radio_filtergravesearch" value="nocords" checked>
			<label class="control-label" style="color:gray" for="nocords">Groby bez obrysów</label><br /><br />
			<input type="radio" id="unassignedcords" name="radio_filtergravesearch" value="unassignedcords">
			<label class="control-label" style="color:gray" for="unassignedcords">Obrysy nieprzypisane</label><br /><br />
			<input type="radio" id="lackinglocparam" name="radio_filtergravesearch" value="lackingparam">
			<label class="control-label" style="color:gray" for="lackinglocparam">Niepełna lokalizacja</label><br /><br />
		</div>
		<div class="row">
			<div class="col-md-9">
			</div>
			<div class="col-md-3">
				<button class="w-100 btn btn-md" type="button" onclick="filterGrave()">Wyszukaj</button>
			</div>
		</div>
		<br /><br />
	</div>
	</div>
	<div class="row">
		<div id="graveInfo" class="col-md-11">

		</div>
	</div>
