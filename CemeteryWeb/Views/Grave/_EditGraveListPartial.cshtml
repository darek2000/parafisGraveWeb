@model List<CemeteryWeb.Models.GravePersonDetailModel>

<style>
	#searchresult td {
		padding: 20px;
	}
</style>
@if (Model != null)
{
	<div class="row">
		<div class="col-md-10">
			<h3>Znaleziono zmarłych: <span style="color: red">@Model.Count()</span></h3>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<table id="searchresult">
				<tr>
					<td>Zdjęcie</td>
					<td>Imię i nazwisko</td>
					<td>Data urodzenia</td>
					<td>Rok urodzenia</td>
					<td>Data śmierci</td>
					<td>Rok śmierci</td>
					<td>Kwatera</td>
					<td>Rząd</td>
					<td>Numer</td>
					<td>Rezerw.</td>
					<td>Weryfik.</td>
					<td>GrPers ID</td>
					<td>Pers ID</td>
					<td>Gr ID</td>
					<td>Akcja</td>
					<td>Link</td>
				</tr>
				@foreach (var item in Model)
				{

					<tr>
						<td>
							<a target="_blank" href='..\GravePhotos\@item.FileName'><img src="..\GravePhotos\@item.FileName" width="180" /></a>
						</td>
						<td>
							<h4><span>@item.Name @item.Surname</span></h4>
						</td>

						@if (item.YearBirth == null)
						{
							<td>
								@if (item.DateBirth != null)
								{
									<h4><span>@(((DateTime)item.DateBirth).ToShortDateString())</span></h4>
								}
							</td>
							<td></td>
						}
						else
						{
							<td></td>
							<td><h4><span>@item.YearBirth</span></h4></td>
						}
						@if (item.YearDeath == null)
						{
							<td>
								@if (item.DateDeath != null)
								{
									<h4><span>@(((DateTime)item.DateDeath).ToShortDateString())</span></h4>
								}
							</td>
							<td></td>
						}
						else
						{
							<td></td>
							<td><h4><span>@item.YearDeath</span></h4></td>
						}
						<td><h4><span>@item.LocationAttributeTwo</span></h4></td>
						<td>
							<h4><span>@item.LocationAttributeThree</span></h4>
						</td>
						<td>
							<h4><span>@item.LocationAttributeFour</span></h4>
						</td>
						<td>
							<h4>
								@if (item.IsReserved == true)
								{
									<span>Tak</span>
								}
								else
								{
									<span>Nie</span>
								}
							</h4>
						</td>
						<td>
							<h4>
								@if (item.IsForVerification == true)
								{
									<span>Tak</span>
								}
								else
								{
									<span>Nie</span>
								}
							</h4>
						</td>
						<td>
							<h4><span>@item.Id</span></h4>
						</td>
						<td>
							<h4><span>@item.FkPerson</span></h4>
						</td>
						<td>
							<h4><span>@item.FkGrave</span></h4>
						</td>
						<td>
							<button onclick="editGrave('@item.Id');">Edytuj</button>
						</td>
						<td>
							<a target="_blank" href="/Grave/Edit/@item.Id">Edycja</a>
						</td>
					</tr>
					<tr>
						<td colspan="14" style="margin: 0px; padding: 0px;">
							<span><b>Zdjęcia: </b></span>
							@foreach (var pic in item.PhotoList)
							{
								<span><a target="_blank" href="~/GravePhotos/@pic">@pic</a>&nbsp;</span>;
							}
						</td>
					</tr>
					<tr>
						<td colspan="14" style="border-bottom: 1px solid black; margin: 0px; padding: 0px;">
							<span><b>Opis: </b></span>
							<span>@item.Description</span>
						</td>
					</tr>
				}
			</table>
		</div>
	</div>
}

<script>
	function editGrave(graveId) {

		window.location.href = '@Url.Action("Edit", "Grave")/' + graveId;
	}
</script>